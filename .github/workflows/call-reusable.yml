name: Call Reusable Workflow

on:
  push:
    branches: [master]
  workflow_dispatch:
    inputs:
      deploy_env:
        description: "Target environment"
        required: true
        type: choice
        options:
          - staging
          - production
        default: "staging"

jobs:
  call-reusable:
    uses: areeb-ado-migration/reusable-workflow/.github/workflows/reusable-workflow.yml@master
    secrets:
      PRIVATE_REPO_TOKEN: ${{ secrets.REUSABLE_WORKFLOW_TOKEN }}  # ONLY this secret is needed for auth
    with:
      environment: ${{ github.event.inputs.deploy_env }}
      custom_message: "Triggered from ${{ github.repository }} by Hossam :D"
      # api_key: ${{ secrets.DEPLOY_API_KEY }}  # Pass this in the reusable workflow's secrets
